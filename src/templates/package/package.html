{% extends '_layout.html' %}
{% load widgets %}
{% load static %}
{% load fullurl %}
{% load math %}

{% block meta %}
<title>Apprepo - AppImage: {{ entity.name }}</title>
<meta name="keywords" content="application, repository, linux, appimage, appstore">
<meta name="description" content="{{ entity.description|striptags }}">
{% endblock meta %}

{% block title %}
<div class="row" style="margin-bottom: 0px;">
    <div class="col s12 m6 l8 center">
        <div class="row">
            <div class="col s12">
                <h1 class="light brown-text text-darken-3">
                    AppImage: {{ entity.name }}
                </h1>
            </div>
            <div class="col s12">
                <p class="light">
                    Apprepo is a non-profit volunteer project. Although every effort is made to ensure that
                    everything in the repository is safe to install, you use it <b>AT YOUR OWN RISK</b>.
                </p>
                {% if entity.description|length %}
                <p class="light">{{ entity.description|safe }}</p>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="col s12 m6 l4 hide-on-small-only valign-wrapper"
         style="max-height: 20em;">
        <img src="{% static 'default/wires.png' %}"
             class="materialboxed left-align" style="z-index: -1;">
    </div>
</div>
{% endblock %}

{% block content %}
<div class="row white darken-3" style="margin-bottom: 0px; width: 100%;">
    <div class="col s12 m7 xl8 hide-on-small-only valign-wrapper">
        {% if entity.image %}
        <img src="{{ entity.image.url }}" class="materialboxed">
        {% endif %}
    </div>
    <div class="col s12 m5 xl4">
        <div class="card brown lighten-5">
            <div class="card-content">
                <div class="row">
                    {% if entity.homepage|length %}
                        <div class="col s12 center">
                            <h5 class="light">Home page</h5>
                        </div>
                        <div class="col s12 center">
                            <h5 class="light">
                                <a class="waves-effect waves-light btn red truncate"
                                   href="{{ entity.homepage }}" target="_blank">
                                    <i class="material-icons right">arrow_forward</i>
                                    {{ entity.homepage }}
                                </a>
                            </h5>
                        </div>
                    {% endif %}

                    {% if entity.version %}
                    <div class="col s12">
                        <h5 class="light center">Latest version</h5>
                        <div class="row">
                            <div class="col s4 align-left light">SHA-1 Hash:</div>
                            <div class="col s8 align-left light">{{ entity.version.hash }}</div>
                            <div class="col s4 align-left light">Updated at:</div>
                            <div class="col s8 align-left light">{{ entity.version.created|date:'Y M d' }}</div>
                        </div>
                    </div>
                    <div class="col s12 center">
                        <a class="waves-effect waves-light btn-large green pulse"
                           href="{% url 'package_download' slug=entity.slug %}">
                            <i class="material-icons right">file_download</i>
                            Download
                        </a>
                    </div>
                    {% endif %}
                </div>

            </div>
            <div class="card-action left-align">
                <div class="row">
                    {% if entity.groups.all|length %}
                    <div class="col s12">
                        <h5 class="light center">Categories</h5>
                        {% for group in entity.groups.all %}
                        <div class="row valign-wrapper grey-text text-darken-1">
                            <div class="col s2">
                                <a href="{% url 'package_group' group.id %}" class="title">
                                    <img src="{% static 'icons/package.svg' %}" alt="{{ group.name }}"
                                         class="circle responsive-img">
                                </a>
                            </div>
                            <div class="col s10 ">
                                <a href="{% url 'package_group' group.id %}" class="title grey-text text-darken-1">
                                    <h5>{{ group.name }}</h5>
                                    <div>{{ group.description }}</div>
                                </a>
                            </div>
                        </div>
                        {% endfor %}
                        <br/>
                    </div>
                    {% endif %}

                    {% if entity.comments.all|length %}
                    <div class="col s12">
                        <h5 class="light center">Comments</h5>
                        <ul type="1">
                            {% for comments in entity.comments.all %}
                            <li>{{ comments.text }}</li>
                            {% endfor %}
                        </ul>
                        <br/>
                    </div>
                    {% endif %}
                    {% if entity.versions.all|length %}
                    <div class="col s12">
                        <h5 class="light center">Build history</h5>
                        <ul type="1" class='grey-text text-darken-2'>
                            {% for version in entity.versions.all %}
                            <li>{{ version.name }}, {{ version.description }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}
                </div>


            </div>
        </div>
    </div>
</div>


<div class="row brown lighten-5" style="margin-bottom: 0px; width: 100%;">
    <div class="col s12 center">
        <h3 class="light">Screenshots</h3>
        {% if entity.description|length %}
        <p class="light">{{ entity.description|safe }}</p>
        {% endif %}
    </div>

    <div class="col s12">
        <div class="row">
            {% for image in entity.images %}
            <div class="col s12 m6 l4 xl3">
                <div class="card hoverable">
                    <div class="card-image grey lighten-4 z-depth-3 valign-wrapper" style="height: 200px;">
                        <img src="{{ image.url }}" style="max-height: 100%; max-width: 100%">
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <br/><br/><br/>
    </div>
</div>

{% if entity.version %}
<div class="row white lighten-5" style="margin-bottom: 0px; width: 100%;">
    <div class="col s12 center">
        <h3 class="light brown-text text-darken-3">How to install:</h3>
        <p class="light">Although every effort is made to ensure that everything
            in the repository is safe to install, you use it <b>AT YOUR OWN RISK</b></p>
        <br/><br/>
    </div>
    <div class="col s12">
        <div class='row' style="margin-bottom:0px;">
            <div class="col s6 card brown darken-3 green-text text-darken-3">
                <div class="card-content white-text">
                    wget {% fullurl 'package_download' slug=entity.slug %} --output-document={{ entity.package }}<br/>
                    chmod +x ./{{ entity.package }}<br/>
                    ./{{ entity.package }}<br/>
                </div>
            </div>
            <div class="col s6 center">
                <h3 class="light">
                    <i class="small material-icons">arrow_back</i>
                    Official way
                </h3>
                <p>For the desktop integration you need to <a
                        href="https://docs.appimage.org/user-guide/run-appimages.html#integrating-appimages-into-the-desktop"
                        target="_blank">install</a> some additional packages.</p>
            </div>
        </div>

        <div class='row' style="margin-bottom:0px;">
            <div class="col s6 center">
                <h3 class="light">
                    Command line
                    <i class="small material-icons">arrow_forward</i>
                </h3>
            </div>
            <div class="col s6 card brown darken-3 green-text text-darken-3">
                <div class="card-content white-text">
                    wget {% fullurl 'package_download' slug=entity.slug %} --output-document={{ entity.package }}<br/>
                    chmod +x ./{{ entity.package }}<br/>
                    ./{{ entity.package }}<br/>
                </div>
            </div>
        </div>
        <div class='row' style="margin-bottom:0px;">
            <div class="col s6 card brown darken-3 green-text text-darken-3">
                <div class="card-content white-text">
                    wget {% fullurl 'package_download' slug=entity.slug %} --output-document={{ entity.package }}<br/>
                    chmod +x ./{{ entity.package }}<br/>
                    ./{{ entity.package }}<br/>
                </div>
            </div>
            <div class="col s6 center">
                <h3 class="light">
                    <i class="small material-icons">arrow_back</i>
                    <a href="https://github.com/probonopd/go-appimage" target="_blank">
                        Go-appimage
                    </a>
                </h3>
                <p>For the desktop integration you need to <a
                        href="https://github.com/probonopd/go-appimage/blob/master/src/appimaged/README.md#installation-and-usage"
                        target="_blank">install</a> some additional packages.</p>
            </div>
        </div>

        <div class='row'>
            <div class="col s6 center">
                <h3 class="light">
                    <a href="{% url 'package' 'apprepo' %}">AppRepo</a>
                    <i class="small material-icons">arrow_forward</i>
                </h3>
                <p>The desktop integration will be provided by this package.</p>
            </div>
            <div class="col s6 card brown darken-3 green-text text-darken-3">
                <div class="card-content white-text">
                    wget {% fullurl 'package_download' slug='apprepo' %} --output-document=Apprepo.AppImage<br/>
                    chmod +x ./Apprepo.AppImage<br/>
                    ./Apprepo.AppImage install {{ entity.slug }}<br/>
                    ~/Applications/{{ entity.package }}
                </div>
            </div>
        </div>
        <br/><br/>
    </div>
</div>

{% endif %}
{% widget 'dashboard.groups' %}

{% endblock %}